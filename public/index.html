<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Root Page</title>
</head>
<body>
    <form id = "form" method="post" enctype="multipart/form-data" action="/">
        <label>Enter a Quote: </label>
        <br>
        <input type="text" id="quote" name="quote"></input>
        <br>
        <input type="text" id="author" name="author"></input>
        <br>
        <input type="text" id="source" name="source"></input>
        <br>
        <button id="submit" name="submit">SUBMIT</button>
    </form>
    <br>
    <textarea name="quotes" id="quotes"></textarea>
    <script>
        //Since the elements are assigned outside the event no values are assigned
        const quote = document.getElementById("quote")
        const author = document.getElementById("author")
        const source = document.getElementById("source")
        const form = document.getElementById("form")
        const allQuotes = document.getElementById("quotes");



        
        form.addEventListener
        form.addEventListener('submit', e =>{
            //You can check if the variables are not falsy
            e.preventDefault();
            if(quote && author && source){
                const fullQuote = {
                    quote: quote.value, 
                    author: author.value, 
                    source: source.value}
                const fullQuoteArray = Object.values(fullQuote);
                for(var i=0; i<fullQuoteArray.length; i++){
                    console.log(fullQuoteArray[i]);
            }
                //Since the object with the values is already created, you can make a post request
                //XMLHttpRequest
                let request = new XMLHttpRequest();
                request.open("POST", "http://localhost:4001/", true)
                //This is required if the HTTP call is a XML POST
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.send(`quote=${fullQuote.quote}&author=${fullQuote.author}&source=${fullQuote.source}`);


            }
        })
    </script>
</body>
</html>